package com.bridgeit.objectorientedprograms;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Scanner;

import javax.imageio.IIOException;

import org.codehaus.jackson.map.ObjectMapper;


public class AddressBookManager 
{
	ObjectMapper objectMapper = new ObjectMapper();
	AddressBookMain addressbook=new AddressBookMain();
	File file;
	static Scanner s=new Scanner(System.in);
	public void create() {
		System.out.println("Give a name to your new address book:");
		file=new File("/home/bridgeit/Desktop/AddressBook.json" );
		try {
				if (file.createNewFile()){
					System.out.println("Address book is created!");
					FileWriter fw=new FileWriter(file);
					fw.write("{}");
					fw.flush();
					fw.close();
				}
				else{
					System.out.println("Address book is already exists.");
				}
			} catch (IOException e) {
				e.printStackTrace();
				}
		addressbook.operation();
	}
	public void open() {
		file=null;
		System.out.println("Enter the name of address book");
			String filename="/home/bridgeit/Desktop/AddressBook.json/" ;
				try {
					Person person=objectMapper.readValue(new FileInputStream(filename), Person.class );
				} catch (IOException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			
	}
	public void save() throws IOException {
		ArrayList<Person> arrayList=new ArrayList<Person>();
		arrayList=addressbook.list();
		
		objectMapper.writeValue(file, arrayList);		
	}
	public void saveAs() {
		
	}
	public void quit() {
	
	}

	public static void main(String[] args) throws IOException {
		
		AddressBookManager manager=new AddressBookManager();
		System.out.println("Welcome to Address");
		do{
		System.out.println("Make a choice from below");
		System.out.println("1. Create\t 2. Open\t 3. Save\t4. Save As\t 5.Quit");
		File file = null;
		switch (s.nextInt()) {
		case 1:	manager.create();
				break;
		case 2:	manager.open();
				break;
		case 3:	manager.save();
				break;
		case 4:	manager.saveAs();
				break;
		
		case 5:System.exit(0);
			
		}
		}while(true);
}
}
